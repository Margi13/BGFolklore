@using BGFolklore.Models.Calendar.ViewModels
@using BGFolklore.Common.Nomenclatures
@using BGFolklore.Web.Controllers
@using BGFolklore.Web.Common;
@using Microsoft.Extensions.Localization;
@using BGFolklore.Data.Models;
@using Microsoft.AspNetCore.Identity;

@inject UserManager<User> userManager

@inject IStringLocalizer<CalendarController> localizer

@model RecurringEventViewModel

<a asp-action="ModalPartial">
    <tr class="eventRow" onclick="eventRowOnClick(@Json.Serialize(Model).ToString(), @Json.Serialize(userManager.GetUserId(User)).ToString())">
        <td>@Towns.AllTowns.OrderBy(t => t.Id).ToArray()[Model.TownId - 1].Name</td>
        <td>@localizer[$"PlaceType{Model.PlaceType}"]</td>
        <td>@Model.Name</td>
        <td>@Model.Address</td>
        <td>
            @foreach (int item in Enum.GetValues(typeof(DaysOfWeek)))
            {
                @if ((Model.OccuringDays & item) == item)
                {
                    <div>
                        @localizer[$"Day{(((DaysOfWeek)item).ToString())}"]
                    </div>
                }
            }
        </td>
        <td>
            @Model.EventDateTime.TimeOfDay
        </td>
        <td>
            @* В мапер *@
            @foreach (int item in Enum.GetValues(typeof(AttendeeType)))
            {
                @if ((Model.IntendedFor & item) == item)
                {
                    <div>
                        @localizer[$"AttendeeType{(((AttendeeType)item).ToString())}"]
                    </div>
                }
            }
        </td>
        <td>@Model.Rating</td>
    </tr>
</a>
